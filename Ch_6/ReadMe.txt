6. Практика. Работа с Email

--------------------------------------------------
Транспортер почты

const SibApiV3Sdk = require('sib-api-v3-sdk')
--------------------------------------------------
Шифрование в express (генерация произвольного ключа)

const crypto = require('crypto')
crypto.randomBytes(32, async(err, buffer) => {

  buffer.toString('hex')
})
--------------------------------------------------
Добавить 1 час к текущей дате

candidate.resetTokenExp = Date.now() + 60 * 60 * 1000
--------------------------------------------------
Поиск по условию в mongodb

const user = await User.findOne({
      resetToken: req.params.token,
      resetTokenExp: {$gt: Date.now()} // если $gt больше чем текущая дата
    })
--------------------------------------------------
Шифрование
const bcrypt = require('bcryptjs')
user.password = await bcrypt.hash(req.body.password, 10)
--------------------------------------------------
Дирректива hendlebars

const hbs = exphbs.create({
 defaultLayout: 'main',
 extname: 'hbs',
 handlebars: allowInsecurePrototypeAccess(Handlebars),
 helpers: require('./utils/hbs-helpers')
})
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------
--------------------------------------------------